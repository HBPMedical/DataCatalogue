<!--<button (click)="goBack()">Back</button>-->

<h1><i class="fa fa-hospital-o">{{hospital.name}}</i></h1>
<!--
<button mat-raised-button
        class="example-add-tab-button"
        (click)="addTab()">
  New Version
</button>
-->
<!--f <a>curent version id: {{currentVersionId}}</a>-->
<button class="newVersion" routerLink="/hospitals/{{hospital.hospital_id}}/new-version">
  <i class="fa fa-plus"></i>
</button>
<!--
<button class="openMappings" (click)="openMappings()">
Open mAPPINGS
</button>
-->
<mat-tab-group class="inner" [selectedIndex]="hospitalVersions.length-1" (selectedTabChange)="tabChanged($event)">
  <mat-tab *ngFor="let version of hospitalVersions" label="{{version.name}}" id="version.version_id"><!-- +' ('+version.createdAt.slice(0,10)+')'-->

    <!--<a>{{changeVersionId(version.version_id)}}</a>-->
    <br>
    <div style="width: 300px; margin-bottom: 20px;">
      <ng-select class="select"
                 [allowClear]="true"
                 [options]="arrayIterationByLabel(version.variables)"
                 [disabled]="disabled"
                 (selected)="selected($event)"
                 (filterInputChanged)="filterInputChanged($event)"
                 (deselected)="deselected($event)"
                 placeholder="Search...">
      </ng-select>
    </div>

    <div class="visuals" *ngIf="!editable">
      <app-tree [versionId]="version.version_id" [(reportOpen)]="reportOpen" [(diagramOpen)]="diagramOpen" [searchTermVar]="searchTermVar"></app-tree>
      <app-reports [(diagramOpen)]="diagramOpen" [(reportOpen)]="reportOpen" [variables]="version.variables" [batchReports]="version.batchReports" [searchTermVar]="searchTermVar"></app-reports>
      <app-mapping-visual [versionName]="version.name" [(reportOpen)]="reportOpen" [(versionId)]="version.version_id" [(diagramOpen)]="diagramOpen"></app-mapping-visual>
    </div>

    <mat-accordion multi="true">
      <app-version-details *ngIf="diagramOpen==false && reportOpen==false" [searchTermVar]="searchTermVar" [versionId]="version.version_id"
                           [versionName]="currentVersionName" [downloadFileName]="downloadName"
                           [cdeData]="false" [editable]="editable"></app-version-details>
    </mat-accordion>

  </mat-tab>
  <!--
  <mat-tab class="upload" label="Create new Version">

    <div class="container" style="width:500px">

      <form-upload [sampleNameVersion]="createSampleFileName()"></form-upload>

      <br/>
      <br/>

      <list-upload></list-upload>
    </div>
  </mat-tab>
  -->
</mat-tab-group>



